# Linux学习笔记

>#### **@author 24m探照灯**



[toc]

## <span style="color:rgb(0,255,255)">一 文件结构(**重要**)</span>

### 深度理解linux树状文件

​										**linux文件结构**		[(图片形式)](images\Linux文件结构.png)

```Mermaid
graph TD;  
    A["/"] --> B["/root"]  
    A --> C["/bin"]  
    A --> D["/boot"]  
    A --> E["/dev"]  
    A --> F["/etc"]  
    A --> G["/home"]  
    A --> H["/var"]  
    A --> I["/lib"]  
    A --> J["/usr"]  
    A --> K["/media"]  
    A --> L["..."]  
    
    B --> M["/root/Desktop"]  
    B --> N["/root/Maildir"]  
    B --> O["..."]  
    J --> P["/usr/bin"]  
    J --> Q["/usr/lib"]  
    J --> R["..."]
```

### Linux具体的目录结构(不用背,知道即可)

>###### **`/bin`** [==常用==] （/usr/bin    /usr/local/bin)
>
>- 是Bianry是缩写,这个目录存放着最经常使用的命令
>
>---
>
>###### **`/sbin`**    (/usr/sbin         /usr/local/sbin)
>
>- s就是Super User的意思,这里存放的是系统管理员使用的系统管理程序
>
>---
>
>###### **`/home`** [==常用==]
>
>- 存放普通用户的主目录,在Linux中每个用户都有一个自己的目录,一般该目录名是以用户的账号命名
>
>---
>
>###### `/root` [==常用==]
>
>- 该目录为系统管理员,也称作超级权限者的用户主目录
>
>---
>
>###### **`/lib`**
>
>- 系统开机所需要最基本的动态连接共享库,其作用类似于Windows里的DLL文件.几乎所有的应用程序都需要用到这些共享库
>
>---
>
>###### **`/lost+found`**
>
>- 这个目录一般情况下是空的,当系统非法关机后,这里就存放了一些文件
>
>---
>
>###### **`/etc`**  [==常用==]
>
>- 所有的系统管理所需要的配置文件和子目录,比如安装mysql数据库 my.conf
>
>---
>
>###### **`/usr`** [==常用==]
>
>- 这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似与windows下的program files目录。
>
>---
>
>###### `/boot` [==常用==]
>
>- 存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件
>
>---
>
>###### `/proc`
>
>- 这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息
>
>---
>
>###### `/srv`
>
>- service缩写，该目录存放一些服务启动之后需要提取的数据
>
>---
>
>###### `/sys`
>
>- 这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统sysfs
>
>---
>
>###### `/tmp`
>
>- 这个目录是用来存放一些临时文件的
>
>---
>
>###### `/dev`
>
>- 类似于windows的设备管理器，把所有的硬件用文件的形式存储
>
>---
>
>###### `/media` [==常用==]
>
>- linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后，linux会把识别的设备挂载到这个目录下
>
>---
>
>###### `/mnt` [==常用==]
>
>- 系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mnt/上，然后进入该目录就可以查看里的内容了。d：/myshare
>
>---
>
>###### `/opt`
>
>- 这是给主机额外安装软件所摆放的目录。如安装ORACLE数据库就可放到该目录下。默认为空
>
>---
>
>###### `/usr/local` [==常用==]
>
>- 这是另一个给主机额外安装软件所安装的目录。一般是通过编译源码方式安装的程序
>
>---
>
>###### `/var` [==常用==]
>
>- 这个目录中存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下。包括各种日志文件
>
>---
>
>`/selinux [security-enhanced linux]`
>
>- SELinux是一种安全子系统，它能控制程序只能访问特定文件，有三种工作模式，可以自行设置.

---

## <span style="color:rgb(200,200,100);">二 Linux的基础命令</span>

### 1.vi / vim  文本编辑器

>**快捷键:**

```txt
i  进入插入模式
： 进入命令模式
	命令模式下
	：wq（保存退出）
	：q（退出）
	：q！（强制退出，不保存）
	/关键字 + 回车（查找） 输入n为查找下一个
	set nu （显示行号）
	set nonu (取消行号)
```

```txt
一般模式下
yy (拷贝当前行)
5yy (拷贝当前行向下的5行) 
p  (粘贴)
dd (删除当前行)  
6dd (删除当前行向下的6行 )
G (定位到文档的最末行)
gg (定位到文档的首行)
u (撤销到上一步)
任意数字 + shift+g  (快速定位到输入行列)
```

> [更多的键位(图片)](images\Snipaste_2024-09-23_21-49-47.png)

### 2.帮助命令

#### **==man==** 获得帮助信息

- 基本语法:`man [命令或配置文件]` (功能描述: 获得帮助信息)
- 案例: 查看ls命令的帮助信息  `man ls`

---

#### **==help==** 指令

- 基本语法: `help 命令`  (功能描述: 获得shell内置命令的帮助信息)
- 案例: 查看cd命令的帮助信息
- 要不直接浏览器搜

### 3.文件目录类

---

#### **==pwd==** 指令		( 显示当前工作目录的绝对路经)

- 基本语法: `pwd`  
- 案例: 显示当前工作目录的绝对路径

---

#### **==ls==** 指令		(功能: 显示当前目录的文件和目录)

- 基本语法: `ls [选项] [目录或是文件]`

- 常用的选项: 

- ```
	-a 显示当前目录所有的文件和目录,包括隐藏的
	-l 以列表的方式显示信息
	-h 显示文件大小
	```
	
- 案例:查看当前目录的所有内容信息

---

#### **==cd==** 指令 		 ( 切换到指定的目录)

- 基本语法: `cd [参数]` 

- ```
  cd ~ 或 cd  回到自己的家目录
  cd .. 回到当前目录的上一级目录 
  . 表示当前的目录路
  ```

---

#### 	**==mkdir==** 指令		(用于创建目录)

- 基本语法: `mkdir [选项] 要创建的目录` 

- 常用选项:  `-p  : 创建多级目录`

- 案例:

- ```
  案例1: 创建一个目录 /home/dog
  	mkdir /home/dog
  案例2: 创建多级目录 /home/animal/tiger
  	mkdir -p /home/animal/tiger 
  ```

---

#### ==rmdir== 指令		(删除空目录)

- 基本语法: `rmdir [选项] 要删除的空目录` 
- 使用细节: rmdir 删除的是空目录.如果目录下有内容时无法删除
- 提示: 如果需要删除非空目录,需要使用 `rm -rf 要删除的目录`    ==谨慎==

---

#### ==touch== 指令		(创建空文件)

- 基本语法: `touch 文件名称` 

---

#### ==cp== 指令		(功能: 拷贝文件到指定目录)

- 基本语法: `cp [选项] source dest`
- 常用选项: `-r : 递归复制整个文件夹`
- 使用细节: 强制覆盖不提示的方法: `\cp`

---

#### ==rm== 指令		( 移除文件或目录)

- 基本语法: rm [选项] 要删除的文件或目录

- 常用选项:

- ```
  -r : 递归删除整个文件夹
  -f : 强制删除不提示
  ```

- 使用细节: 强制删除不提示的方法: 带上 `-f` 参数即可

---

#### ==mv== 指令		 (移动文件与目录或重命名)

- 基本语法:

- ```
  mv oldNameFile newNameFile		(功能描述: 重命名)
  mv /temp/movefile /targetFolder	(功能描述: 移动文件)
  ```

- 应用实例:

- ```
  案例1: 将 /home/cat.txt 文件 重新命名为 pig.txt
  	touch /home/cat.txt /home/pig.txt
  案例2: 将 /home/pig.txt 文件 移动到 /root 目录下
  	touch /home/cat.txt /root/					touch /home/cat.txt /root/cow.txt  移动并重命名
  案例3: 移动整个目录, 比如将 /opt/bbb 移动到 /home下
  	mv /opt/bbb /home/
  ```

---

#### ==cat== 指令		(功能: 查看文件内容)

- 基本语法: `cat [选项] 要查看的文件`
- 常用选项: `-n` : 显示行号
- 使用细节: cat 只能浏览文件,而不能修改文件,为了浏览方便,一般会带上 管道命令 `| more`

---

#### ==more== 指令

- more指令是一个基于vi编辑器的文本过滤器,它以全屏幕的方式显示文本文件的内容

- 基本语法: more 要查看的文件

- 操作说明:

- | 操作          | 功能说明                             |
	| ------------- | ------------------------------------ |
	| 空白键(space) | 代表向下翻页                         |
	| Enter         | 代表向下翻一行                       |
	| q             | 代表立刻离开 more,不在显示该文件内容 |
	| Ctrl+F        | 向下滚动一屏                         |
	| Ctrl+B        | 返回上一屏                           |
	| =             | 输出当前行的行号                     |
	| :f            | 输出文件名和当前行的行号             |

---

#### ==less== 指令

- less指令用来分屏查看文件内容,功能与more类似,但比more更加强大.支持各种显示终端,less指令在显示文件内容时,并不是一次将整个文件加载后才显示,而是根据显示需要加载内容,对于显示大型文件具有较高的效率

- 基本语法: `less 要查看的文件`

- 操作说明:

- | 操作          | 功能说明                                          |
	| ------------- | ------------------------------------------------- |
	| 空白键(space) | 向下翻动一页                                      |
	| [pagedown]    | 向下翻动一页                                      |
	| [pageup]      | 向上翻动一页                                      |
	| /字串         | 向下搜寻 [字串] 的功能; n: 向下查找; N: 向上查找; |
	| ?字串         | 向上搜寻 [字串] 的功能; n: 向上查找; N: 向下查找; |
	| q             | 离开less这个程序                                  |

---

#### ==echo== 指令		(输出内容到控制台)

- 基本语法: `echo [选项] [输出内容]`

---

#### ==head== 指令		(显示文件开头部分内容)

- 默认情况下head 指令显示文件的前10行内容

- 基本语法:

- ```
	head 文件			(功能描述: 查看文件头10行内容)
	head -n 5 文件	(功能描述: 查看文件头5行内容,,5可以是任意行数)
	```

---

#### ==tail== 指令		(输出文件中尾部的内容)

- 默认情况下tail指令显示文件的前10行内容

- 基本语法:

- ```
	tail 文件			(功能描述: 查看文件尾10行的内容)
	tail -n 5 文件	(功能描述: 查看文件尾5行内容,5可以是任意行数)
	tail -f 文件		(功能描述: 实时追踪该文档的所有更新)
	```

---

#### ==>== 指令 和 ==>>== 指令		(输出重定向 和 >>追加)

- 基本语法:

- ```
	ls -l > 文件				(功能描述: 列表的内容写入到文件中 (覆盖写))
	ls -al >> 文件			(功能描述: 列表的内容追加到文件的末尾)
	cat 文件1 > 文件2		   (功能描述: 将文件1的内容覆盖到文件2)
	echo "内容" >> 文件		
	```

---

#### ==ln== 指令			(给原文件创建一个软连接)

- 软连接也称为符号连接,类似于windows里的快捷方式,主要存放了连接其他文件的路劲

- 基本语法: `ln -s [原文件或目录] [软连接名]` 

- 细节说明： 当我们使用pwd查看目录时，仍然看到的是软连接所在目录

- 应用案例：

- ```
	案例1： 在 /home 目录下创建一个软连接 myroot，连接到 /root 目录
			ln -s /root /home/myroot
	案例2： 删除软连接 myroot
			rm /home/myroot
	```

---

#### ==history== 指令			（查看已经执行过的历史命令，也可以执行历史命令）

- 基本语法： `history`

- 应用实例：

- ```
	案例1： 显示所有的历史指令
	    history
	案例2： 显示最近使用过的10个指令
		history 10
	案例3： 执行历史编号为5的指令
		！5
	```

---

### 4.时间日期类

#### ==date== 指令			（显示当前日期）

- 基本语法：

- ```
	date							（功能描述： 显示当前时间）
	date +%Y						（功能描述： 显示当前年份）
	date +%m						（功能描述： 显示当前月份）
	date + %d						（功能描述： 显示当前是哪一天）
	date “+%Y-%m-%d %H:%M:%S"		（功能描述： 显示年月日时分秒）
	```

---

#### ==date== 指令			(设置日期)

- 基本语法: `date -s 字符串时间`

- 应用案例:

- ```
	案例1: 设置系统当前时间, 比如设置成 2020-11-03 20"02:10
			date -s "2020-11-03 20"02:10"
	```

---

#### ==cal== 指令			(查看日历)

- 基本语法: `cal [选项]`				(功能描述: 不加选项,显示本月日历)

- 应用案例:

- ```
	案例1: 显示当前日历
			cal
	案例2: 显示2020年日历
	        cal 2020
	```

---

### 5.搜索查找类

#### ==find== 指令

- find 指令将从指定目录向下递归遍历其各个子目录,将满足条件的文件或者目录显示在终端
- 基本语法: `find [搜索范围] [选项]`
- 选项说明:
- | 选项            | 功能                             |
	| --------------- | -------------------------------- |
	| -name<查询方式> | 按照指定的文件名查找模式查找文件 |
	| -user<用户名>   | 查找属于指定用户名所有文件       |
	| -size<文件大小> | 按照指定的文件大小查找文件       |

- 应用实例:

- ```
	案例1: 按文件名 :根据名称查找/home目录下的hello.txt文件
			 	find /home -name hello.txt
	案例2: 按拥有者 :查找/opt目录下,用户名称为 nobody的文件
				 find /home -user nobody
	案例3: 查找整个linux系统下大于200M的文件(+n大于		-n小于	n等于) 
				 find / -size +200M
	```

---

#### ==locate== 指令						(快速定位文件路径)

- locate指令可以快速定位文件路径.locate指令利用事先建立的系统中所有文件名及路径的locate数据库实现快速定位给定的文件.
- locate指令无需遍历整个文件系统,查询速度较快.为了保证查询结果的准确度,管理员必须定期更新locate时刻
- 基本语法:  `locate 搜索文件`
- 特别说明:
- 由于locate指令基于数据库进行查询,所以第一次运行前,必须使用updatedb指令创建locate数据库

---

#### ==which== 指令				(查看某个指令在哪个目录下)

- 比如查找`ls`所在的目录:	`which ls`

---

#### ==grep== 指令 和 管道符号 ==|==

- grep过滤查找, 管道符,"|" , 表示将前一个命令的处理结果输出传递给后面的命令处理

- 基本语法: `grep [选项] 查找内容 源文件`

- 常用选项:

- | 选项 | 功能             |
	| ---- | ---------------- |
	| -n   | 显示匹配行及行号 |
	| -i   | 忽略字母大小写   |

- 应用实例:

- ```
	案例1: 请在 hello.txt文件中, 查找 "yes" 所在行,并且显示行号
			cat /home/hello.txt | grep "yes"
			grep -n "yes" /home/hello.txt
	```

---

### 6. 压缩和解压类

#### ==gzip/gunzip== 指令	

- gzip 用于压缩文件,	gunzip 用于解压的

- 基本语法:

- ```
	gzip 文件					(功能描述: 压缩文件,只能将文件压缩为*.gz文件)
	gunzip 文件.gz			(功能描述:解压缩文件命令)
	```

---

#### ==zip/unzip== 指令

- zip 用于压缩文件,	unzip 用于解压的

- 基本语法:

- ```
	zip [选项] xxx.zip 将要压缩的内容				(功能描述: 压缩文件和目录的命令)
	unzip [选项] xxx.zip							 (功能描述:解压缩文件)
	```

- zip常用选项:  `-r` :递归压缩,即压缩目录

- unzip的常用选项:  `-d<目录>` : 指定解压后文件的存放目录

- 应用实例:

- ```
	案例1: 将 /home下的 所有文件/文件夹进行压缩成 myhome.zip
			zip -r myhome.zip /home/ 			[将home目录及其包含的文件和子文件夹都压缩]
	案例2: 将myhome.zip 解压到 /opt/tmp目录下		
			unzip -d /opt/tmp /home/myhome.zip
	```

---

#### ==tar== 指令

- tar 指令 是打包指令,最后打包的文件是 .tar.gz 的文件

- 基本语法:    `tar [选项] xxx.tar.gz 打包的内容`                        (功能描述: 打包目录,压缩后的文件格式为 .tar.gz)

- 选项说明:

- | 选项 | 功能               |
	| ---- | ------------------ |
	| -c   | 产生.tar打包文件   |
	| -v   | 显示详细信息       |
	| -f   | 指定压缩后的文件名 |
	| -z   | 打包同时压缩       |
	| -x   | 解包.tar文件       |

- 应用实例:

- ```
	案例1: 压缩多个文件, 将 /home/pig.txt 和 /home/cat.txt 压缩成 pc.tar.gz
			tar -zcvf pc.tar.gz /home/pig.txt /home/cat.txt
	案例2: 将/home 的文件夹 压缩成 myhome.tar.gz
			tar -zcvf myhome.tar.gzx /home/
	案例3: 将 pc.tar.gz解压到当前目录,切换到 /opt/
			tar -zxvf pc.tar.gz
	案例4: 将myhome.tar.gz解压到 /opt/tmp2目录下
			tar -zxvf /home/myhome.tar.gz -C /home/tmp2
	```


---

## <span style="color: rgb(140,130,255)">三 组管理和权限管理</span>

### 1. 文件/目录 所有者

>一般为文件的创建者,谁创建了该文件.就自然成为该文件的所有者

#### 🫓查看文件的所有者

- 指令: `ls -ahl`

#### 🫓修改文件所有者

- 指令: `chown 用户名 文件名`

#### 🫓修改文件所在的组

- 基本指令: `chgrp 组名 文件名`

- 应用实例:

- ```
	使用root用户创建文件 orange.txt,看看当前这个文件属于哪个组,然后将这个文件所在组,修改到fruit组
			groupadd fruit
			tourch orange.txt
			chgrp fruit orange.txt
	```

---

### 2. 组的创建

- 基本指令: groupadd 组名

- 应用实例:

- ```
	创建一个组 monster
			groupadd monster
	创建一个用户fox,并放入到 monster组中
			useradd -g monster fox
	```

---

### 3. 其他组

>除文件的所有者和所在组的用户外,系统的其他用户都是文件的其他组

#### 🫓 改变用户所在组

>添加用户时,可以指定将该用户添加到哪个组中

- 改变用户所在组 和 初始目录

- ```
	usermod -g 新组名 用户名
	usermod -d 目录名 用户名 改变该用户登入的初始目录											用户需要有进入到新目录的权限
	```


---

### 4. 权限的基本介绍

>ls -l 中显示的内容如下:
>
>-rw-r--r--. 1 root    root       193 10月  9 02:21 hello.txt

- <font color="lightgreen">0-9位说明:</font>

	1.  第0位确定文件类型(d, - , l , c , b)

		​    - 是普通文件

		​	l 是连接,相当于windows的快捷方式
		​	d 是目录,相当于windows的文件夹
		​	c 是字符设备文件, 鼠标,键盘
		​	b 是块设备,比如硬盘

	1.  第1-3位确定所有者(该文件的所有者) 拥有该文件的权限		--User
	2.  第4-6位确定所属组(同用户组的) 拥有该文件的权限,		--Group
	3.   第7-9位确定其他用户拥有该文件的权限		--Other


- <font color="lightgreen">rwx 作用到==文件==</font>
	1. [ r ] 代表可读(read):可以读取,查看
	2. [ w ] 代表可写(write): 可以修改,但是不代表可以删除文件,删除一个文件的前提是对该文件所在的目录有写权限,才能删除该文件
	3. [ x ] 代表可执行(execute): 可以被执行
- <font color="lightgreen">rwx 作用到==目录==</font>
	1. [ r ] 代表可读(read):可以读取,ls查看目录内容 
	2. [ w ] 代表可写(write): 可以修改,对目录内创建+删除+重命名目录
	3. [ x ] 代表可执行(execute): 可以进入该目录

- <font color="lightgreen">其他说明</font>

	```
	1								   文件: 硬链接数 或     目录: 子目录数
	root							 用户
	root							 组
	1213							文件大小(字节)
	Feb 2 09:39					最后修改日期
	abc								 文件名
	```

---

### 3. 修改权限-==chmod==

>基本说明:
>
>通过chmod指令,可以修改文件或者目录的权限

- 第一种方式 : + , - , = 变更权限

	- ```
		u:所有者	q:所有组	o:其他人	a:所有人(u,g,o的总和)
		1)  chmod u=rwx  ,  g=rx  ,  o=x      文件/目录名
		2) chmod	o+w		文件/目录名
		3) chmod	a-x		文件/目录名
		```

- 第二种方式: 通过数字变更权限

	- ```
		r=4				w=2				x=1
		rwx=4+2+1=7
		chmod 751 文件目录名		 			=>			 chmod u=rwx,g=rx,o=x 文件目录名
		```

---

### 4. 修改文件所有者-==chown==

基本介绍:

```
chown newowner 文件/目录 							改变所有者
chown newowner:newgroup 文件/目录 			改变所有者和所在组
-R 如果是目录,则使其下所有子文件或目录递归生效
```

---

### 5. 修改文件/目录所在组-==chgrp==

基本介绍:

```
chgrp newgroup 文件/目录			改变所有组
-R 如果是目录,则使其下所有子文件或目录递归生效
```

---



---

## 四 关机&重启命令

>```text
>shutdown -h now				立即关机
>shutdown -h 1				  1分钟后关机
>shutdown -r now				重新启动
>halt								   关机
>reboot								重新启动
>sync								 把内存的数据同步到磁盘
>```

>细节:
>
>1. 不管是重启系统还是关闭系统,首先要运行sync命令,把内存中的数据写入到磁盘中
>2. 目前的 shutdown/reboot/halt 等命令均已经在关机前进行了sync      小心驶得万年船

---

## 五 用户组

#### 🫓1.新增组

- 基本语法: `groupadd 组名`

#### 🫓删除组

- 基本语法: `groupdel 组名`

#### 🫓增加用户时直接加上组

- 基本语法: `useradd -g 用户组 用户名`

#### 🫓修改用户的组

- 基本语法: `usermod -g 用户组 用户名`

---

### 1. 用户和组相关文件

- ​	/etc/passwd 文件

​				为 **==用户(user)==的配置文件**,记录用户的各种信息

​				每行的含义: `用户名:口令:用户标识号:组标识号:注释性描述:主目录:登入shell`

- ​	/etc/shadow 文件

	​		为 **==口令==的配置文件**

	​		每行的含义: `登入名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志`

- ​	/etc/group 文件

​				为 **==组(group)==的配置文件**.记录Linux包含的组的信息

​				每行含义: `组名:口令:组标识号:组内用户列表`

---

## 六 指定运行级别

>### 基本介绍

>运行级别说明:    
>
>语法: `init 指定级别`
>
>0: 关机
>
>1: 单用户(找回丢失密码)
>
>2: 多用户状态没有网络服务
>
>3: 多用户状态有网络服务  multi-user.target
>
>4: 系统未使用保留给用户
>
>5: 图形界面	graphical.target
>
>6: 系统重启

>常用运行级别分别是 3和5 ,也可以指定默认级别运行

>指定运行的默认级别:  `systemctl set-default  multi-user.target`
